# ============================================
# パイプラインルーティング設定
# ============================================
# doc_type, workspace などの条件で、使用するプロンプトとモデルを切り替える
#
# 優先順位:
# 1. by_doc_type (ドキュメントタイプ)
# 2. by_workspace (ワークスペース)
# 3. default (デフォルト)

routing:
  # ============================================
  # doc_type ベースのルート
  # ============================================
  by_doc_type:
    # チラシ処理
    flyer:
      description: "トクバイチラシ処理（商品情報抽出）"
      stages:
        stage_f:
          prompt_key: "flyer"
          model_key: "flyer"
        stage_g:
          prompt_key: "flyer"
          model_key: "flyer"
        stage_h:
          prompt_key: "flyer"
          model_key: "flyer"
        stage_i:
          prompt_key: "flyer"
          model_key: "flyer"

    # Classroom ドキュメント処理
    classroom_document:
      description: "Google Classroomドキュメント処理"
      stages:
        stage_h:
          prompt_key: "classroom"
          model_key: "classroom"
        stage_i:
          prompt_key: "default"
          model_key: "classroom"

    # 家計簿領収書
    household_receipt:
      description: "家計簿領収書処理"
      stages:
        stage_f:
          prompt_key: "default"
          model_key: "default"
        stage_g:
          prompt_key: "default"
          model_key: "default"
        stage_h:
          prompt_key: "default"
          model_key: "default"
        stage_i:
          prompt_key: "default"
          model_key: "default"

    # デフォルト
    default:
      description: "デフォルト処理（汎用ドキュメント）"
      stages:
        stage_f:
          prompt_key: "default"
          model_key: "default"
        stage_g:
          prompt_key: "default"
          model_key: "default"
        stage_h:
          prompt_key: "default"
          model_key: "default"
        stage_i:
          prompt_key: "default"
          model_key: "default"

  # ============================================
  # workspace ベースのルート（オプション）
  # ============================================
  by_workspace:
    household:
      description: "家計簿ワークスペース"
      # 必要に応じてステージ設定を追加

    inbox:
      description: "受信箱ワークスペース"
      # 必要に応じてステージ設定を追加

    classroom:
      description: "Classroomワークスペース"
      # 必要に応じてステージ設定を追加

# ============================================
# ルーティングロジック説明
# ============================================
# 1. doc_type が指定されている場合、by_doc_type から設定を検索
# 2. 見つからない場合、by_workspace から設定を検索
# 3. それでも見つからない場合、default を使用
# 4. 各ステージごとに prompt_key と model_key を取得
# 5. config/prompts/{stage}/{prompt_key}.md からプロンプトを読み込み
# 6. config/models.yaml から models[stage][model_key] でモデルを取得
