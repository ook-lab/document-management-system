# ============================================
# AIモデル定義
# ============================================
# 各ステージで使用するAIモデルを定義
# キー: default, flyer など (doc_type や条件に対応)

models:
  # Stage E: Preprocessing (前処理・テキスト抽出)
  stage_e:
    default: "gemini-2.5-flash"
    gmail: "gemini-2.5-flash-lite"  # Gmail用（軽量）

  # Stage F: Visual Analysis (視覚解析)
  # flyer: 商品写真の視覚理解が重要なため Pro を使用
  stage_f:
    default: "gemini-2.5-flash"
    flyer: "gemini-2.5-pro"
    flash_lite: "gemini-2.5-flash-lite"  # 家計簿用（最軽量）
    gmail: "gemini-2.5-flash-lite"  # Gmail用（軽量）

  # Stage G: Logical Refinement (論理的精錬)
  # 重複排除、REF_ID付与、unified_text生成
  # 低コストの flash-lite を使用
  stage_g:
    default: "gemini-2.0-flash-lite"
    flyer: "gemini-2.0-flash-lite"
    gmail: "gemini-2.0-flash-lite"

  # Stage H: Structuring (構造化) - レガシー、互換性のため残存
  stage_h:
    default: "gemini-2.5-flash"
    flyer: "gemini-2.5-flash"
    flash_lite: "gemini-2.5-flash-lite"  # 家計簿用（Pythonロジック中心）
    gmail: "gemini-2.5-flash-lite"  # Gmail用（軽量）

  # Stage I: Synthesis (統合・要約) - レガシー、互換性のため残存
  stage_i:
    default: "gemini-2.5-flash"
    flyer: "gemini-2.5-flash"
    gmail: "gemini-2.5-flash-lite"  # Gmail用（軽量）

  # Stage H+I: Combined Structuring & Synthesis (構造化 + 統合・要約)
  # 1回のLLM呼び出しでH+Iを実行（コスト削減・品質向上）
  stage_hi:
    default: "gemini-2.0-flash"
    flyer: "gemini-2.0-flash"
    gmail: "gemini-2.0-flash-lite"

  # Stage K: Embedding (ベクトル化)
  stage_k:
    default: "text-embedding-3-small"
    flyer: "text-embedding-3-small"

# ============================================
# ハイブリッドOCR設定 (Surya + PaddleOCR + Gemini)
# ============================================
# Stage F で使用するハイブリッドOCRの有効/無効を workspace ベースで制御
#
# ハイブリッドOCRの特徴:
# - Surya: レイアウト解析（210領域検出）
# - PaddleOCR: 日本語テキスト認識（1514文字抽出）
# - Gemini Vision: 統合・補完（最終2418文字）
# - コスト: Gemini のみと同じ（PaddleOCR/Surya は無料）
# - 処理時間: 約10分（Gemini のみの場合は1分）
#
# 推奨設定:
# - 複雑なレイアウト・表が多いドキュメント: true
# - シンプルなレイアウト・速度重視: false
#
hybrid_ocr:
  # デフォルト: 有効（Hybrid OCR）
  default: true

  # === Workspace 別設定 ===

  # 家計簿: 有効
  # 理由: レシートの表構造・小さい文字の高精度抽出が必要
  kakeibo: true

# ============================================
# モデルのコスト情報（参考）
# ============================================
# gemini-2.5-flash: 高速、安価
# gemini-2.5-flash: 構造化に最適
# text-embedding-3-small: 1536次元ベクトル
