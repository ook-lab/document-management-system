{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "育哉-学校 汎用スキーマ",
  "description": "育哉の学校関連文書に対応する汎用的な構造定義",
  "properties": {
    "basic_info": {
      "type": "object",
      "title": "基本情報",
      "description": "学校名、学年、発行日などの基本メタデータ",
      "properties": {
        "school_name": {
          "type": ["string", "null"],
          "title": "学校名",
          "description": "学校の正式名称"
        },
        "grade": {
          "type": ["string", "null"],
          "title": "学年",
          "description": "対象学年（例: 5年生）"
        },
        "issue_date": {
          "type": ["string", "null"],
          "format": "date",
          "title": "発行日",
          "description": "文書の発行日（YYYY-MM-DD形式）"
        },
        "period": {
          "type": ["string", "null"],
          "title": "対象期間",
          "description": "文書が対象とする期間（例: 2024年11月18日-21日）"
        },
        "document_title": {
          "type": ["string", "null"],
          "title": "文書タイトル",
          "description": "文書の表題・タイトル"
        },
        "document_number": {
          "type": ["string", "null"],
          "title": "文書番号",
          "description": "学年通信などの号数（例: 第12号）"
        }
      }
    },
    "text_blocks": {
      "type": ["array", "null"],
      "title": "文章セクション（記事ブロック）",
      "description": "表以外の場所にある、まとまった文章セクション（朝会の話、振り返り、道徳の内容など）",
      "items": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "title": "見出し",
            "description": "セクションのタイトル（例: 朝会「マナーとルールについて」、今日のふりかえり）"
          },
          "content": {
            "type": "string",
            "title": "本文",
            "description": "セクションの本文（長文可、原文そのまま）"
          }
        },
        "required": ["title", "content"]
      }
    },
    "weekly_schedule": {
      "type": ["array", "null"],
      "title": "週間予定・時間割",
      "description": "曜日・時限・クラスで構成される時間割表データ（既存の表エディタロジックをそのまま使用可能）",
      "items": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "title": "日付",
            "description": "MM-DD形式またはYYYY-MM-DD形式"
          },
          "day": {
            "type": "string",
            "title": "曜日",
            "description": "月、火、水など"
          },
          "day_of_week": {
            "type": "string",
            "title": "曜日（フル）",
            "description": "月曜日、火曜日など"
          },
          "events": {
            "type": "array",
            "title": "行事・イベント",
            "description": "その日の特別な行事やイベント",
            "items": {
              "type": "string"
            }
          },
          "class_schedules": {
            "type": "array",
            "title": "クラス別時間割",
            "description": "各クラスの授業スケジュール（5A、5Bなどクラスごと）",
            "items": {
              "type": "object",
              "properties": {
                "class": {
                  "type": "string",
                  "title": "クラス名",
                  "description": "例: 5A, 5B"
                },
                "subjects": {
                  "type": "array",
                  "title": "科目リスト",
                  "description": "時限順の科目リスト（例: [\"1限:国語\", \"2限:算数\"]）",
                  "items": {
                    "type": "string"
                  }
                },
                "periods": {
                  "type": "array",
                  "title": "時限別科目",
                  "description": "時限ごとの詳細情報（periodとsubjectのペア）",
                  "items": {
                    "type": "object",
                    "properties": {
                      "period": {
                        "type": ["integer", "string"],
                        "title": "時限",
                        "description": "1, 2, 3 または \"朝\""
                      },
                      "subject": {
                        "type": "string",
                        "title": "科目",
                        "description": "国語、算数など"
                      },
                      "time": {
                        "type": "string",
                        "title": "時間",
                        "description": "開始-終了時刻（例: 8:45-9:30）"
                      }
                    },
                    "required": ["period", "subject"]
                  }
                }
              },
              "required": ["class"]
            }
          },
          "note": {
            "type": "string",
            "title": "備考・連絡事項",
            "description": "その日の持ち物や連絡事項"
          }
        },
        "required": ["date"]
      }
    },
    "structured_tables": {
      "type": ["array", "null"],
      "title": "その他の構造化表データ",
      "description": "weekly_schedule以外の汎用的な表データ（持ち物リスト、成績表、イベント一覧など）",
      "items": {
        "type": "object",
        "properties": {
          "table_title": {
            "type": "string",
            "title": "表のタイトル",
            "description": "表の見出し・タイトル"
          },
          "table_type": {
            "type": "string",
            "title": "表の種類",
            "description": "requirements（持ち物）、events（行事）、scores（成績）など"
          },
          "headers": {
            "type": "array",
            "title": "列ヘッダー",
            "description": "表の列名リスト",
            "items": {
              "type": "string"
            }
          },
          "rows": {
            "type": "array",
            "title": "行データ",
            "description": "表の各行のデータ（オブジェクトまたは配列）",
            "items": {
              "type": ["object", "array"]
            }
          }
        },
        "required": ["rows"]
      }
    },
    "special_events": {
      "type": ["array", "null"],
      "title": "特別イベント",
      "description": "通常授業以外の特別な予定",
      "items": {
        "type": "string"
      }
    }
  },
  "required": []
}
