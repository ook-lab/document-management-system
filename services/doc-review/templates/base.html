<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Document Review{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <nav class="navbar">
        <div class="nav-brand">
            <h1>Document Management System</h1>
        </div>
        <div class="nav-links">
            <a href="{{ url_for('documents.review_page') }}"
               class="nav-link {% if request.path.startswith('/documents') %}active{% endif %}">
                ğŸ“‹ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼
            </a>
            <a href="{{ url_for('emails.inbox_page') }}"
               class="nav-link {% if request.path.startswith('/emails') %}active{% endif %}">
                ğŸ“¬ ãƒ¡ãƒ¼ãƒ«å—ä¿¡ãƒˆãƒ¬ã‚¤
            </a>
        </div>
        <div class="nav-user">
            <span id="user-email"></span>
            <button id="logout-btn" class="btn btn-secondary btn-small">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>
    </nav>

    <!-- ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="login-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>ãƒ­ã‚°ã‚¤ãƒ³</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <input type="email" id="login-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="login-password" name="password" required>
                </div>
                <div id="login-error" class="error-message" style="display: none;"></div>
                <button type="submit" class="btn btn-primary">ãƒ­ã‚°ã‚¤ãƒ³</button>
            </form>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="delete-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>å‰Šé™¤ç¢ºèª</h3>
            <p id="delete-modal-message">æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</p>
            <div class="modal-actions">
                <button id="delete-confirm-btn" class="btn btn-danger">å‰Šé™¤</button>
                <button id="delete-cancel-btn" class="btn btn-secondary">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            </div>
        </div>
    </div>

    <!-- ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ -->
    <div id="toast-container"></div>

    <!-- JavaScript -->
    <script>
        // CSRFãƒˆãƒ¼ã‚¯ãƒ³
        window.CSRF_TOKEN = null;

        // APIãƒ™ãƒ¼ã‚¹URL
        window.API_BASE = '/api';
    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
