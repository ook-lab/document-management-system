{% extends 'base.html' %}

{% block title %}„Éâ„Ç≠„É•„É°„É≥„Éà„É¨„Éì„É•„Éº - Document Review{% endblock %}

{% block content %}
<div class="review-layout">
    <!-- Â∑¶„Çµ„Ç§„Éâ„Éë„Éç„É´Ôºà„Éâ„Ç≠„É•„É°„É≥„Éà‰∏ÄË¶ßÔºã„Éï„Ç£„É´„ÇøÔºâ -->
    <aside id="side-panel" class="side-panel collapsed">
        <div class="side-panel-content">
            <!-- „Éï„Ç£„É´„Çø„Çª„ÇØ„Ç∑„Éß„É≥ÔºàÊäò„Çä„Åü„Åü„ÅøÔºâ -->
            <details class="filter-section">
                <summary class="filter-toggle">üîç „Éï„Ç£„É´„Çø„ÉªÊ§úÁ¥¢</summary>
                <div class="filter-content">
                    <div class="form-group">
                        <label for="workspace-filter">Workspace</label>
                        <select id="workspace-filter">
                            <option value="">ÂÖ®„Å¶</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filetype-filter">„Éï„Ç°„Ç§„É´„Çø„Ç§„Éó</label>
                        <select id="filetype-filter">
                            <option value="">ÂÖ®„Å¶</option>
                            <option value="pdf">PDF</option>
                            <option value="email">„É°„Éº„É´</option>
                            <option value="text">„ÉÜ„Ç≠„Çπ„Éà</option>
                            <option value="markdown">Markdown</option>
                            <option value="csv">CSV</option>
                            <option value="json">JSON</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="status-filter">„É¨„Éì„É•„Éº„Çπ„ÉÜ„Éº„Çø„Çπ</label>
                        <select id="status-filter">
                            <option value="pending">Êú™Á¢∫Ë™ç</option>
                            <option value="reviewed">Á¢∫Ë™çÊ∏à„Åø</option>
                            <option value="all">ÂÖ®„Å¶</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="search-input">„Ç≠„Éº„ÉØ„Éº„ÉâÊ§úÁ¥¢</label>
                        <input type="text" id="search-input" placeholder="Ê§úÁ¥¢...">
                    </div>
                    <button id="filter-btn" class="btn btn-primary btn-small" style="width:100%;">Ê§úÁ¥¢</button>
                </div>
            </details>

            <!-- ÈÄ≤Êçó -->
            <div class="stats-section">
                <div id="stats-container">
                    <div class="loading"><div class="spinner"></div></div>
                </div>
            </div>

            <!-- „Éâ„Ç≠„É•„É°„É≥„Éà‰∏ÄË¶ß -->
            <div class="document-list-section">
                <div class="list-header">
                    <span id="document-count">0‰ª∂</span>
                    <button id="refresh-btn" class="btn btn-small btn-secondary">üîÑ</button>
                </div>
                <div id="document-list-container">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </div>
    </aside>

    <!-- „Éë„Éç„É´ÈñãÈñâ„Éà„Ç∞„É´ -->
    <button id="panel-toggle" class="panel-toggle" title="„Éâ„Ç≠„É•„É°„É≥„Éà‰∏ÄË¶ß">
        <span class="toggle-icon">üìÅ</span>
        <span class="toggle-count" id="toggle-count">0</span>
    </button>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑÔºà„Éó„É¨„Éì„É•„ÉºÔºãÁ∑®ÈõÜÔºâ -->
    <main class="main-content-area">
        <div id="document-detail-container">
            <div class="detail-layout">
                <!-- „Éó„É¨„Éì„É•„Éº -->
                <div class="preview-panel card">
                    <div class="card-header">
                        <h3 class="card-title">üìÑ „Éó„É¨„Éì„É•„Éº</h3>
                        <span id="doc-title" class="doc-title-display"></span>
                    </div>
                    <div id="preview-container" class="preview-container">
                        <div class="empty-state">
                            <p>‚Üê „Éâ„Ç≠„É•„É°„É≥„Éà„ÇíÈÅ∏Êäû</p>
                        </div>
                    </div>
                </div>

                <!-- „É°„Çø„Éá„Éº„ÇøÁ∑®ÈõÜ -->
                <div class="editor-panel card">
                    <div class="card-header">
                        <h3 class="card-title">‚úèÔ∏è „É°„Çø„Éá„Éº„ÇøÁ∑®ÈõÜ</h3>
                    </div>

                    <!-- ÂãïÁöÑ„Çø„Éñ -->
                    <div class="tabs" id="metadata-tabs">
                        <button class="tab active" data-tab="tab-form">üìù „Éï„Ç©„Éº„É†</button>
                        <!-- ÂãïÁöÑ„Çø„Éñ„Åå„Åì„Åì„Å´ÊåøÂÖ•„Åï„Çå„Çã -->
                        <button class="tab" data-tab="tab-json">üîç JSON</button>
                        <button class="tab" data-tab="tab-history">üìú Â±•Ê≠¥</button>
                    </div>

                    <!-- „Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
                    <div id="tab-contents">
                        <div id="tab-form" class="tab-content active">
                            <div id="form-editor-container">
                                <p class="empty-state">„Éâ„Ç≠„É•„É°„É≥„Éà„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                            </div>
                        </div>

                        <div id="dynamic-tab-contents"></div>

                        <div id="tab-json" class="tab-content">
                            <div class="form-group">
                                <textarea id="json-editor" class="json-editor" rows="15"></textarea>
                            </div>
                            <div id="json-error" class="error-message" style="display:none;"></div>
                        </div>

                        <div id="tab-history" class="tab-content">
                            <div id="history-container">
                                <p>‰øÆÊ≠£Â±•Ê≠¥„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                            </div>
                        </div>
                    </div>

                    <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ -->
                    <div class="action-buttons">
                        <button id="save-btn" class="btn btn-primary">üíæ ‰øùÂ≠ò</button>
                        <button id="review-btn" class="btn btn-success">‚úÖ ÂÆå‰∫Ü</button>
                        <button id="unreview-btn" class="btn btn-secondary" style="display:none;">‚Ü©Ô∏è Êàª„Åô</button>
                        <button id="delete-btn" class="btn btn-danger">üóëÔ∏è ÂâäÈô§</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/document-editor.js') }}"></script>
{% endblock %}
