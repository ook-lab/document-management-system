# Gmail統合: メールの閲覧方法

## 問題: Google Driveプレビューで正しく表示されない

Google Driveのプレビュー機能では、セキュリティ制限により複雑なHTMLメールが正しく表示されません。

### ❌ Google Driveプレビューの表示
- HTML剥き出し
- スタイルが適用されない
- 画像が表示されない（場合がある）

### ✅ 正しい閲覧方法

**方法1: ダウンロードしてブラウザで開く**

1. Google Driveでメールファイルを開く
2. 右上の「⋮」メニューをクリック
3. 「ダウンロード」を選択
4. ダウンロードしたHTMLファイルをChromeなどのブラウザで開く

**方法2: 直接ダウンロードリンクを使用**

Google DriveのファイルIDがわかっている場合、以下のURLで直接ダウンロードできます：

```
https://drive.google.com/uc?export=download&id=【ファイルID】
```

例：
```
https://drive.google.com/uc?export=download&id=1P-tYalsdtmYGOjNI6WGteQc6XSBws5eH
```

このリンクをクリックすると、自動的にダウンロードが始まります。

---

## 表示される内容

正しく開くと、以下のように表示されます：

✅ **グラデーションヘッダー（紫色）**
- 件名
- From（送信者）
- To（受信者）
- Date（日時）

✅ **メール本文**
- 元のデザインを保持
- すべての画像が表示
- リンクがクリック可能

✅ **レスポンシブデザイン**
- PC・タブレット・スマホで最適表示

---

## トラブルシューティング

### Q: 画像が表示されない
A: ブラウザで開いても画像が表示されない場合、メールに埋め込み画像（CID画像）が使われている可能性があります。現在、外部URL画像のみ対応しています。

### Q: 文字化けする
A: ファイルをダウンロードしてブラウザで開くと、UTF-8で正しく表示されます。

### Q: iPadでは見れるがPCで見れない
A: Google Driveのプレビュー機能の仕様によるものです。必ずダウンロードしてブラウザで開いてください。

---

## 自動化アイデア

将来的な改善案：
1. メール通知に直接ダウンロードリンクを含める
2. Webアプリでメール一覧を表示
3. Google Driveの代わりにS3やWebサーバーに配置

---

**更新日: 2025-12-06**
